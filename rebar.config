{erl_opts, [debug_info, {parse_transform}]}.

{deps, [
  {eserial, {git, "https://github.com/vzroman/eserial.git", {branch, "main"}}}
]}.

{shell, [
  {config, "config/sys.config"},
  {apps, [ft12_sniffer]}
]}.

{relx, [
  {release, {ft12_sniffer, "0.0.1"}, [
    kernel,
    stdlib,
    sasl,
    eserial
  ]},
  {include_erts, false},
  {vm_args, "./config/vm.args"},
  {sys_config, "./config/sys.config"},
  {extended_start_script, true},
  {overlay, [
  ]}
]}.

{profiles, [
  {prod, [
    {erl_opts, [no_debug_info, warnings_as_errors, {parse_transform, lager_transform}]},
    {relx, [
      {dev_mode, false},
      % ATTENTION! We do really need this only because of ekka.
      % It uses module_info of each found module to initialize its database.
      % Dirty but we still need it.
      {debug_info, keep},
      {include_src, false},
      {include_erts, true}
    ]}
  ]}
]}.